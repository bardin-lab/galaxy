{"version":3,"sources":["mvc/tool/tool-form.js"],"names":["View","Backbone","extend","initialize","options","self","this","modal","parent","Galaxy","_uiModal2","default","form","_toolFormBase2","_utils2","merge","listen_to_history","always_refresh","buildmodel","process","model","attributes","build_url","build_data","job_id","root","id","$","params","version","url","data","display","set","resolve","status","error_message","response","err_msg","get","location","param","redirect","$el","prepend","Message","message","debug","title","_localization2","Close","hide","large","body","postchange","current_state","tool_id","tool_version","emit","create","wait","request","type","append","_customize","deferred","setElement","execute_button","_uiMisc2","Button","icon","cls","wait_cls","onclick","tooltip","unwait","enable","submit","job_remap","label","buttons","inputs","push","name","extra_user_preferences","user","preferences","JSON","parse","use_cached_job","help","ignore","value","callback","job_def","trigger","validate","action","attr","$f","method","_","each","key","remove","success","jobs","length","toolId","_webhooks2","WebhookView","currHistoryPanel","refreshContents","error","input_found","error_messages","input_id","highlight","matchResponse","err_data","batch_src","job_inputs","job_input_id","batch_n","input_value","input_field","field_list","input_def","input_list","optional","batch","n","values","src","njobs","$message","_templateSuccess","_templateError","njobs_text","addClass","text","outputs","output","hid","stringify"],"mappings":"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","file":"../../../scripts/mvc/tool/tool-form.js","sourcesContent":["import _l from \"utils/localization\";\n/* This is the regular tool form */\nimport Utils from \"utils/utils\";\nimport Ui from \"mvc/ui/ui-misc\";\nimport Modal from \"mvc/ui/ui-modal\";\nimport ToolFormBase from \"mvc/tool/tool-form-base\";\nimport Webhooks from \"mvc/webhooks\";\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.modal = parent.Galaxy.modal || new Modal.View();\n        this.form = new ToolFormBase(\n            Utils.merge(\n                {\n                    listen_to_history: true,\n                    always_refresh: false,\n                    buildmodel: function(process, form) {\n                        var options = form.model.attributes;\n\n                        // build request url\n                        var build_url = \"\";\n                        var build_data = {};\n                        var job_id = options.job_id;\n                        if (job_id) {\n                            build_url = `${Galaxy.root}api/jobs/${job_id}/build_for_rerun`;\n                        } else {\n                            build_url = `${Galaxy.root}api/tools/${options.id}/build`;\n                            build_data = $.extend({}, Galaxy.params);\n                            build_data[\"tool_id\"] && delete build_data[\"tool_id\"];\n                        }\n                        options.version && (build_data[\"tool_version\"] = options.version);\n\n                        // get initial model\n                        Utils.get({\n                            url: build_url,\n                            data: build_data,\n                            success: function(data) {\n                                if (!data.display) {\n                                    window.location = Galaxy.root;\n                                    return;\n                                }\n                                form.model.set(data);\n                                self._customize(form);\n                                Galaxy.emit.debug(\"tool-form-base::_buildModel()\", \"Initial tool model ready.\", data);\n                                process.resolve();\n                            },\n                            error: function(response, status) {\n                                var error_message = (response && response.err_msg) || \"Uncaught error.\";\n                                if (status == 401) {\n                                    window.location = `${Galaxy.root}user/login?${$.param({\n                                        redirect: `${Galaxy.root}?tool_id=${options.id}`\n                                    })}`;\n                                } else if (form.$el.is(\":empty\")) {\n                                    form.$el.prepend(\n                                        new Ui.Message({\n                                            message: error_message,\n                                            status: \"danger\",\n                                            persistent: true,\n                                            large: true\n                                        }).$el\n                                    );\n                                } else {\n                                    Galaxy.modal &&\n                                        Galaxy.modal.show({\n                                            title: _l(\"Tool request failed\"),\n                                            body: error_message,\n                                            buttons: {\n                                                Close: function() {\n                                                    Galaxy.modal.hide();\n                                                }\n                                            }\n                                        });\n                                }\n                                Galaxy.emit.debug(\n                                    \"tool-form-base::_buildModel()\",\n                                    \"Initial tool model request failed.\",\n                                    response\n                                );\n                                process.reject();\n                            }\n                        });\n                    },\n                    postchange: function(process, form) {\n                        var current_state = {\n                            tool_id: form.model.get(\"id\"),\n                            tool_version: form.model.get(\"version\"),\n                            inputs: $.extend(true, {}, form.data.create())\n                        };\n                        form.wait(true);\n                        Galaxy.emit.debug(\"tool-form::postchange()\", \"Sending current state.\", current_state);\n                        Utils.request({\n                            type: \"POST\",\n                            url: `${Galaxy.root}api/tools/${form.model.get(\"id\")}/build`,\n                            data: current_state,\n                            success: function(data) {\n                                form.update(data);\n                                form.wait(false);\n                                Galaxy.emit.debug(\"tool-form::postchange()\", \"Received new model.\", data);\n                                process.resolve();\n                            },\n                            error: function(response) {\n                                Galaxy.emit.debug(\"tool-form::postchange()\", \"Refresh request failed.\", response);\n                                process.reject();\n                            }\n                        });\n                    }\n                },\n                options\n            )\n        );\n        this.deferred = this.form.deferred;\n        this.setElement(\"<div/>\");\n        this.$el.append(this.form.$el);\n    },\n\n    _customize: function(form) {\n        var self = this;\n        var options = form.model.attributes;\n        // build execute button\n        var execute_button = new Ui.Button({\n            icon: \"fa-check\",\n            tooltip: `Execute: ${options.name} (${options.version})`,\n            title: _l(\"Execute\"),\n            cls: \"btn btn-primary ui-clear-float\",\n            wait_cls: \"btn btn-info ui-clear-float\",\n            onclick: function() {\n                execute_button.wait();\n                form.portlet.disable();\n                self.submit(options, () => {\n                    execute_button.unwait();\n                    form.portlet.enable();\n                });\n            }\n        });\n        options.buttons = { execute: execute_button };\n\n        // remap feature\n        if (options.job_id && options.job_remap) {\n            if (options.job_remap === \"job_produced_collection_elements\") {\n                var label = \"Replace elements in collection ?\";\n                var help =\n                    \"The previous run of this tool failed. Use this option to replace the failed element(s) in the dataset collectio that were produced during the previous tool run.\";\n            } else {\n                var label = \"Resume dependencies from this job ?\";\n                var help =\n                    \"The previous run of this tool failed and other tools were waiting for it to finish successfully. Use this option to resume those tools using the new output(s) of this tool run.\";\n            }\n            options.inputs.push({\n                label: label,\n                name: \"rerun_remap_job_id\",\n                type: \"select\",\n                display: \"radio\",\n                ignore: \"__ignore__\",\n                value: \"__ignore__\",\n                options: [[\"Yes\", options.job_id], [\"No\", \"__ignore__\"]],\n                help: help\n            });\n        }\n\n        // Job Re-use Options\n        var extra_user_preferences = {};\n        if (Galaxy.user.attributes.preferences && \"extra_user_preferences\" in Galaxy.user.attributes.preferences) {\n            extra_user_preferences = JSON.parse(Galaxy.user.attributes.preferences.extra_user_preferences);\n        }\n        var use_cached_job =\n            \"use_cached_job|use_cached_job_checkbox\" in extra_user_preferences\n                ? extra_user_preferences[\"use_cached_job|use_cached_job_checkbox\"]\n                : false;\n        if (use_cached_job === \"true\") {\n            options.inputs.push({\n                label: \"BETA: Attempt to re-use jobs with identical parameters ?\",\n                help: \"This may skip executing jobs that you have already run\",\n                name: \"use_cached_job\",\n                type: \"select\",\n                display: \"radio\",\n                ignore: \"__ignore__\",\n                value: \"__ignore__\",\n                options: [[\"No\", false], [\"Yes\", true]]\n            });\n        }\n    },\n\n    /** Submit a regular job.\n     * @param{dict}     options   - Specifies tool id and version\n     * @param{function} callback  - Called when request has completed\n     */\n    submit: function(options, callback) {\n        var self = this;\n        var job_def = {\n            tool_id: options.id,\n            tool_version: options.version,\n            inputs: this.form.data.create()\n        };\n        this.form.trigger(\"reset\");\n        if (!self.validate(job_def)) {\n            Galaxy.emit.debug(\"tool-form::submit()\", \"Submission canceled. Validation failed.\");\n            callback && callback();\n            return;\n        }\n        if (options.action !== `${Galaxy.root}tool_runner/index`) {\n            var $f = $(\"<form/>\").attr({\n                action: options.action,\n                method: options.method,\n                enctype: options.enctype\n            });\n            _.each(job_def.inputs, (value, key) => {\n                $f.append($(\"<input/>\").attr({ name: key, value: value }));\n            });\n            $f\n                .hide()\n                .appendTo(\"body\")\n                .submit()\n                .remove();\n            callback && callback();\n            return;\n        }\n        Galaxy.emit.debug(\"tool-form::submit()\", \"Validation complete.\", job_def);\n        Utils.request({\n            type: \"POST\",\n            url: `${Galaxy.root}api/tools`,\n            data: job_def,\n            success: function(response) {\n                callback && callback();\n                self.$el.children().hide();\n                self.$el.append(self._templateSuccess(response));\n                // Show Webhook if job is running\n                if (response.jobs && response.jobs.length > 0) {\n                    self.$el.append($(\"<div/>\", { id: \"webhook-view\" }));\n                    var WebhookApp = new Webhooks.WebhookView({\n                        type: \"tool\",\n                        toolId: job_def.tool_id\n                    });\n                }\n                parent.Galaxy && parent.Galaxy.currHistoryPanel && parent.Galaxy.currHistoryPanel.refreshContents();\n            },\n            error: function(response) {\n                callback && callback();\n                Galaxy.emit.debug(\"tool-form::submit\", \"Submission failed.\", response);\n                var input_found = false;\n                if (response && response.err_data) {\n                    var error_messages = self.form.data.matchResponse(response.err_data);\n                    for (var input_id in error_messages) {\n                        self.form.highlight(input_id, error_messages[input_id]);\n                        input_found = true;\n                        break;\n                    }\n                }\n                if (!input_found) {\n                    self.modal.show({\n                        title: _l(\"Job submission failed\"),\n                        body: self._templateError(job_def, response && response.err_msg),\n                        buttons: {\n                            Close: function() {\n                                self.modal.hide();\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    },\n\n    /** Validate job dictionary.\n     * @param{dict}     job_def   - Job execution dictionary\n     */\n    validate: function(job_def) {\n        var job_inputs = job_def.inputs;\n        var batch_n = -1;\n        var batch_src = null;\n        for (var job_input_id in job_inputs) {\n            var input_value = job_inputs[job_input_id];\n            var input_id = this.form.data.match(job_input_id);\n            var input_field = this.form.field_list[input_id];\n            var input_def = this.form.input_list[input_id];\n            if (!input_id || !input_def || !input_field) {\n                Galaxy.emit.debug(\"tool-form::validate()\", \"Retrieving input objects failed.\");\n                continue;\n            }\n            if (!input_def.optional && input_value == null) {\n                this.form.highlight(input_id);\n                return false;\n            }\n            if (input_value && input_value.batch) {\n                var n = input_value.values.length;\n                var src = n > 0 && input_value.values[0] && input_value.values[0].src;\n                if (src) {\n                    if (batch_src === null) {\n                        batch_src = src;\n                    } else if (batch_src !== src) {\n                        this.form.highlight(\n                            input_id,\n                            \"Please select either dataset or dataset list fields for all batch mode fields.\"\n                        );\n                        return false;\n                    }\n                }\n                if (batch_n === -1) {\n                    batch_n = n;\n                } else if (batch_n !== n) {\n                    this.form.highlight(\n                        input_id,\n                        `Please make sure that you select the same number of inputs for all batch mode fields. This field contains <b>${n}</b> selection(s) while a previous field contains <b>${batch_n}</b>.`\n                    );\n                    return false;\n                }\n            }\n        }\n        return true;\n    },\n\n    _templateSuccess: function(response) {\n        if (response.jobs && response.jobs.length > 0) {\n            var njobs = response.jobs.length;\n            var njobs_text = njobs == 1 ? \"1 job has\" : `${njobs} jobs have`;\n            var $message = $(\"<div/>\")\n                .addClass(\"donemessagelarge\")\n                .append(\n                    $(\"<p/>\").text(\n                        `${njobs_text} been successfully added to the queue - resulting in the following datasets:`\n                    )\n                );\n            _.each(response.outputs, output => {\n                $message.append(\n                    $(\"<p/>\")\n                        .addClass(\"messagerow\")\n                        .append($(\"<b/>\").text(`${output.hid}: ${output.name}`))\n                );\n            });\n            $message.append(\n                $(\"<p/>\")\n                    .append(\"<b/>\")\n                    .text(\n                        \"You can check the status of queued jobs and view the resulting data by refreshing the History pane. When the job has been run the status will change from 'running' to 'finished' if completed successfully or 'error' if problems were encountered.\"\n                    )\n            );\n            return $message;\n        } else {\n            return this._templateError(response, \"Invalid success response. No jobs found.\");\n        }\n    },\n\n    _templateError: function(response, err_msg) {\n        return $(\"<div/>\")\n            .addClass(\"errormessagelarge\")\n            .append(\n                $(\"<p/>\").text(\n                    `The server could not complete the request. Please contact the Galaxy Team if this error persists. ${err_msg ||\n                        \"\"}`\n                )\n            )\n            .append($(\"<pre/>\").text(JSON.stringify(response, null, 4)));\n    }\n});\n\nexport default {\n    View: View\n};\n"]}