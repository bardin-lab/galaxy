{"version":3,"sources":["mvc/ui/ui-select-genomespace.js"],"names":["View","Backbone","extend","initialize","options","self","this","browse_button","_uiMisc2","default","ButtonIcon","title","_localization2","icon","tooltip","onclick","browseGenomeSpace","filename_textbox","Input","token_textbox","type","_template","append","$el","_toolGenomespace2","openFileBrowser","successCallback","data","destination","new_value","undefined","value","_getValue","_setValue","values","split"],"mappings":"uSAQIA,EAAOC,SAASD,KAAKE,QAErBC,WAAY,SAASC,GAEjB,IAAIC,EAAOC,KAGXA,KAAKC,cAAgB,IAAIC,EAAAC,QAAGC,YACxBC,OAAO,EAAAC,EAAAH,SAAG,UACVI,KAAM,gBACNC,SAAS,EAAAF,EAAAH,SAAG,sBACZM,QAAS,WACLV,EAAKW,uBAXjBV,KAAAW,iBAAA,IAAAT,EAAAC,QAAAS,MAGIZ,KAAAa,cAAA,IAAAX,EAAAC,QAAAS,OAiBIE,KAAM,aAZNP,KAAAA,WAAMP,KAAAe,UAF6BjB,IAGnCU,KAAAA,EAAAA,wBAASQ,OAAAhB,KAAAC,cAAGgB,KACZR,KAAAA,EAAAA,2BAASO,OAAWhB,KAAAW,iBAAAM,KAChBlB,KAAAA,EAAAA,wBAAKW,OAALV,KAAAa,cAAAI,MAIRP,kBAAA,SAAAZ,GACA,IAAAC,EAAKY,KAiBLO,EAAAf,QAAmBgB,iBAfnBC,gBAAA,SAAAC,GACAtB,EAAKc,MAALQ,EAAqBC,YAArB,IAAyBD,EAAGT,WAM5BG,UAAA,SAAOjB,GACP,MACA,6SAcJiB,MAAAA,SAAWQ,GAaV,QAvD2BC,IAAAD,EA0D5BE,OAAOzB,KAAA0B,YAGC1B,KAAK2B,UAAUJ,IAEfG,UAAA,WACH,OAAA1B,KAAAW,iBAAAc,QAAA,IAAAzB,KAAAa,cAAAY,SAILC,UAAAA,SAAWH,GACPA,IArEwBK,OAAAL,EAAAM,MAAA,KA4EpB7B,KAAKW,iBAAiBc,MAAMG,OAAO,IAJ3C5B,KAAAa,cAAAY,MAAAG,OAAA,mBAMKlC,KAAAA","file":"../../../scripts/mvc/ui/ui-select-genomespace.js","sourcesContent":["import _l from \"utils/localization\";\n// dependencies\nimport Utils from \"utils/utils\";\nimport Ui from \"mvc/ui/ui-misc\";\nimport GenomespaceBrowser from \"mvc/tool/tool-genomespace\";\n/**\n * GenomeSpace file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize: function(options) {\n        // link this\n        var self = this;\n\n        // create insert new list element button\n        this.browse_button = new Ui.ButtonIcon({\n            title: _l(\"Browse\"),\n            icon: \"fa fa-sign-in\",\n            tooltip: _l(\"Browse GenomeSpace\"),\n            onclick: function() {\n                self.browseGenomeSpace();\n            }\n        });\n\n        // create genomespace filepath textbox\n        this.filename_textbox = new Ui.Input();\n\n        // create genomespace token textbox\n        this.token_textbox = new Ui.Input({\n            type: \"password\"\n        });\n\n        // create elements\n        this.setElement(this._template(options));\n        this.$(\".ui-gs-browse-button\").append(this.browse_button.$el);\n        this.$(\".ui-gs-filename-textbox\").append(this.filename_textbox.$el);\n        this.$(\".ui-gs-token-textbox\").append(this.token_textbox.$el);\n    },\n\n    /** Browse GenomeSpace */\n    browseGenomeSpace: function(options) {\n        var self = this;\n        GenomespaceBrowser.openFileBrowser({\n            successCallback: function(data) {\n                self.value(`${data.destination}^${data.token}`);\n            }\n        });\n    },\n\n    /** Main Template */\n    _template: function(options) {\n        return (\n            '<div class=\"ui-gs-select-file\">' +\n            '<div class=\"ui-gs-browse-field\">' +\n            '<span class=\"ui-gs-browse-button\" />' +\n            '<span class=\"ui-gs-filename-textbox\" />' +\n            \"</div>\" +\n            '<div class=\"ui-gs-token-field\">' +\n            '<span class=ui-gs-label\"><div class=\"ui-gs-token-label\">Token</div></span>' +\n            '<span class=\"ui-gs-token-textbox\" />' +\n            \"</div>\" +\n            \"</div>\"\n        );\n    },\n\n    /** Return/Set currently selected genomespace filename/token */\n    value: function(new_value) {\n        // check if new_value is defined\n        if (new_value !== undefined) {\n            this._setValue(new_value);\n        } else {\n            return this._getValue();\n        }\n    },\n\n    // get value\n    _getValue: function() {\n        return `${this.filename_textbox.value()}^${this.token_textbox.value()}`;\n    },\n\n    // set value\n    _setValue: function(new_value) {\n        if (new_value) {\n            values = new_value.split(\"^\");\n            this.filename_textbox.value(values[0]);\n            this.token_textbox.value(values[1]);\n        }\n    }\n});\n\nexport default {\n    View: View\n};\n"]}