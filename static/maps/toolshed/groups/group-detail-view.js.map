{"version":3,"sources":["toolshed/groups/group-detail-view.js"],"names":["mod_toastr","GroupDetailView","Backbone","View","extend","el","options","app","initialize","this","_","window","globalTS","groups","collection","model","get","group_id","render","fetchGroup","that","_groupModel2","default","Group","id","fetch","success","console","log","error","response","responseJSON","err_msg","template","$el","html","group","$","tooltip","templateRow","join"],"mappings":"qLAAYA,oNAINC,EAAkBC,SAASC,KAAKC,QAClCC,GAAI,kBACJC,WACAC,IAPQP,KASRQ,WAAY,SAASF,GACjBG,KAAKH,QAAUI,EAAEN,OAAOK,KAAKH,QAASA,GACtCG,KAAKF,IAAMI,OAAOC,SAASC,OAEC,OAAxBJ,KAAKF,IAAIO,YACTL,KAAKM,MAAQN,KAAKF,IAAIO,WAAWE,IAAIP,KAAKH,QAAQW,UAClDR,KAAKS,UAELT,KAAKU,cAIbA,WAAY,SAASb,GACjB,IAAMc,EAAOX,KACbA,KAAKH,QAAUI,EAAEN,OAAOK,KAAKH,QAASA,GACtCG,KAAKM,MAAQ,IAAIM,EAAAC,QAAgBC,OAAQC,GAAIf,KAAKH,QAAQW,WAC1DR,KAAKM,MAAMU,OACPC,QAAS,SAASX,GACdY,QAAQC,IAAI,mBACZD,QAAQC,IAAIb,GACZK,EAAKF,UAETW,MAAO,SAASd,EAAOe,QACkB,IAA1BA,EAASC,aAChB/B,EAAW6B,MAAMC,EAASC,aAAaC,SA7BrD/B,EAAkBC,MAASC,0BAMzBe,OAAA,WACA,IAAAe,EAAWtB,KAAOC,cAgClBH,KAAKyB,IAAIC,KAAKF,GAAWG,MAAO3B,KAAKM,SA9BrCsB,EAAA,yBAAIC,UACAD,EAAA,WAAKtB,IAAAA,WAAQ,SAGbwB,YAAA,WACH,OAAA7B,EAAAuB,UAiCO,QA9BZd,8CACUC,mCACN,qMAEA,mBACIM,6CACIC,UACAA,gBACAP,wBACH,sBACDS,WACI,UACI7B,wDACH,OACGA,OACH,mCACJ,QAZL,OArBqC,0PAmE7B,QA9BJ,OACEiC,6BACN,QACE,QACA,YAzCmC,WA0E7B,WA7BR,wBA8DQ,6CACA,UAqBX,gBAjIL,uBAiFgB,kBAmDZhC,iBAjDY,sBACA,mBACA,mBACA,kBACA,oBACA,WACA,UACA,2DACA,OACA,OACA,oNACA,QACA,OACA,oCACA,QACA,OACA,+BACA,QACA,OACA,8BACA,QACA,OACA,kDACA,qMAEA,YACA,QACA,wFACA,2BACA,QACA,wFACA,2BACA,QACA,OACA,2BACA,QACA,OACA,uBACA,QACA,QACA,YACA,WACA,WACA,UACFuC,KAAK,mBAKfvC,gBAAiBA","file":"../../../scripts/toolshed/groups/group-detail-view.js","sourcesContent":["import * as mod_toastr from \"libs/toastr\";\nimport mod_group_model from \"toolshed/groups/group-model\";\n\n// toolshed group detail view\nconst GroupDetailView = Backbone.View.extend({\n    el: \"#groups_element\",\n    options: {},\n    app: null,\n\n    initialize: function(options) {\n        this.options = _.extend(this.options, options);\n        this.app = window.globalTS.groups;\n\n        if (this.app.collection !== null) {\n            this.model = this.app.collection.get(this.options.group_id);\n            this.render();\n        } else {\n            this.fetchGroup();\n        }\n    },\n\n    fetchGroup: function(options) {\n        const that = this;\n        this.options = _.extend(this.options, options);\n        this.model = new mod_group_model.Group({ id: this.options.group_id });\n        this.model.fetch({\n            success: function(model) {\n                console.log(\"received data: \");\n                console.log(model);\n                that.render();\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occurred.\");\n                }\n            }\n        });\n    },\n\n    render: function() {\n        const template = this.templateRow();\n        this.$el.html(template({ group: this.model }));\n        $(\"#center [data-toggle]\").tooltip();\n        $(\"#center\").css(\"overflow\", \"auto\");\n    },\n\n    templateRow: function() {\n        return _.template(\n            [\n                \"<div>\",\n                '<h3><%= _.escape(group.get(\"name\")) %></h3>',\n                '<p class=\"\" style=\"color:gray;\">',\n                'A group of <%= group.get(\"members\").length %> members with <%= group.get(\"repositories\").length %> repositories and a total of <%= group.get(\"total_downloads\") %> combined repository clones.</p>',\n\n                \"<h3>Members</h3>\",\n                '<table class=\"grid table table-condensed\">',\n                \"<thead>\",\n                \"<th>Name</th>\",\n                \"<th>Repositories</th>\",\n                \"<th>Registered</th>\",\n                \"</thead>\",\n                \"<tbody>\",\n                '<% _.each(group.get(\"members\"), function(member) { %>',\n                \"<tr>\",\n                \"<td>\",\n                \"<%= _.escape(member.username) %>\",\n                \"</td>\",\n                \"<td>\",\n                '<a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Repositories of <%= _.escape(member.username) %>\" href=\"/repository/browse_repositories_by_user?user_id=<%= member.id %>&use_panels=true\" id=\"<%= member.id %>\"><%= member.user_repos_count %></a>',\n                \"</td>\",\n                \"<td>\",\n                \"<%= member.time_created %>\",\n                \"</td>\",\n                \"</tr>\",\n                \"<% }); %>\",\n                \"</tbody>\",\n                \"</table>\",\n\n                \"<h3>Repositories</h3>\",\n                '<table class=\"grid table table-condensed\">',\n                \"<thead>\",\n                \"<th>Name</th>\",\n                \"<th>Description</th>\",\n                \"<th>Clones</th>\",\n                \"<th>Owner</th>\",\n                \"<th>Categories</th>\",\n                \"<th>Created</th>\",\n                \"<th>Updated</th>\",\n                \"<th>Rating</th>\",\n                \"<th>Verified</th>\",\n                \"</thead>\",\n                \"<tbody>\",\n                '<% _.each(group.get(\"repositories\"), function(repo) { %>',\n                \"<tr>\",\n                \"<td>\",\n                '<a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Details of <%= _.escape(repo.name) %>\" href=\"/view/<%= _.escape(repo.owner) %>/<%= _escape(repo.name) %>\" id=\"<%= repo.id %>\"><%= _.escape(repo.name) %></a>',\n                \"</td>\",\n                \"<td>\",\n                \"<%= _.escape(repo.description) %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= repo.times_downloaded %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= _.escape(repo.owner) %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<% _.each((repo.categories), function(cat) { %>\",\n                '<a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Repositories in <%= cat.name %>\" href=\"/repository/browse_repositories_in_category?id=<%= cat.id %>&use_panels=true\"><%= cat.name %></a><br/>',\n                // '<%= repo.categories %>',\n                \"<% }); %>\",\n                \"</td>\",\n                '<td data-toggle=\"tooltip\" data-placement=\"top\" title=\"<%= repo.time_created_full %>\">',\n                \"<%= repo.time_created %>\",\n                \"</td>\",\n                '<td data-toggle=\"tooltip\" data-placement=\"top\" title=\"<%= repo.time_updated_full %>\">',\n                \"<%= repo.time_updated %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= repo.ratings_mean %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= repo.approved %>\",\n                \"</td>\",\n                \"</tr>\",\n                \"<% }); %>\",\n                \"</tbody>\",\n                \"</table>\",\n                \"</div>\"\n            ].join(\"\")\n        );\n    }\n});\nexport default {\n    GroupDetailView: GroupDetailView\n};\n"]}