{"version":3,"sources":["webpack:///./galaxy/scripts/apps/login.js"],"names":["jQuery","require","$","GalaxyApp","_l","Page","window","app","options","bootstrapped","Galaxy","debug","redirect","encodeURI","show_welcome_with_login","params","param","use_panels","location","href","root","LoginPage","Backbone","View","extend","initialize","page","model","Model","title","setElement","_template","render","prop","welcome_url","login_url","_","Right"],"mappings":";;;;AAAA,wDAAIA,SAAS,mBAAAC,CAAS,CAAT,CAAb;AAAA,KACIC,IAAIF,MADR;AAAA,KAEIG,YAAY,mBAAAF,CAAS,CAAT,EAAoBE,SAFpC;AAAA,KAGIC,KAAK,mBAAAH,CAAS,CAAT,CAHT;AAAA,KAIII,OAAO,mBAAAJ,CAAS,EAAT,CAJX;;AAMAK,QAAOC,GAAP,GAAa,SAASA,GAAT,CAAcC,OAAd,EAAuBC,YAAvB,EAAqC;AAC9CH,YAAOI,MAAP,GAAgB,IAAIP,SAAJ,CAAeK,OAAf,EAAwBC,YAAxB,CAAhB;AACAC,YAAOC,KAAP,CAAc,WAAd;AACA,SAAIC,WAAWC,UAAWL,QAAQI,QAAnB,CAAf;;AAEA;AACA;AACA,SAAI,CAACJ,QAAQM,uBAAb,EAAsC;AAClC,aAAIC,SAASf,OAAOgB,KAAP,CAAa,EAAEC,YAAa,MAAf,EAAuBL,UAAWA,QAAlC,EAAb,CAAb;AACAN,gBAAOY,QAAP,CAAgBC,IAAhB,GAAuBT,OAAOU,IAAP,GAAc,aAAd,GAA8BL,MAArD;AACA;AACH;;AAED,SAAIM,YAAYC,SAASC,IAAT,CAAcC,MAAd,CAAqB;AACjCC,qBAAY,UAAUC,IAAV,EAAiB;AACzB,kBAAKA,IAAL,GAAYA,IAAZ;AACA,kBAAKC,KAAL,GAAa,IAAIL,SAASM,KAAb,CAAmB,EAAEC,OAAQzB,GAAI,gBAAJ,CAAV,EAAnB,CAAb;AACA,kBAAK0B,UAAL,CAAiB,KAAKC,SAAL,EAAjB;AACH,UALgC;AAMjCC,iBAAQ,YAAW;AACf,kBAAKN,IAAL,CAAUxB,CAAV,CAAa,cAAb,EAA8B+B,IAA9B,CAAoC,KAApC,EAA2CzB,QAAQ0B,WAAnD;AACH,UARgC;AASjCH,oBAAY,YAAW;AACnB,iBAAII,YAAY3B,QAAQY,IAAR,GAAe,aAAf,GAA+BlB,EAAEc,KAAF,CAAS,EAAEJ,UAAWA,QAAb,EAAT,CAA/C;AACA,oBAAO,kBAAkBuB,SAAlB,GAA8B,wDAArC;AACH;AAZgC,MAArB,CAAhB;;AAeAjC,OAAE,YAAU;AACRQ,gBAAOgB,IAAP,GAAc,IAAIrB,KAAKkB,IAAT,CAAea,EAAEZ,MAAF,CAAUhB,OAAV,EAAmB;AAC5C6B,oBAAQhB;AADoC,UAAnB,CAAf,CAAd;AAGH,MAJD;AAKH,EAjCD,C","file":"login.bundled.js","sourcesContent":["var jQuery = require( 'jquery' ),\n    $ = jQuery,\n    GalaxyApp = require( 'galaxy' ).GalaxyApp,\n    _l = require( 'utils/localization' ),\n    Page = require( 'layout/page' );\n\nwindow.app = function app( options, bootstrapped ){\n    window.Galaxy = new GalaxyApp( options, bootstrapped );\n    Galaxy.debug( 'login app' );\n    var redirect = encodeURI( options.redirect );\n\n    // TODO: remove iframe for user login (at least) and render login page from here\n    // then remove this redirect\n    if( !options.show_welcome_with_login ){\n        var params = jQuery.param({ use_panels : 'True', redirect : redirect });\n        window.location.href = Galaxy.root + 'user/login?' + params;\n        return;\n    }\n\n    var LoginPage = Backbone.View.extend({\n        initialize: function( page ) {\n            this.page = page;\n            this.model = new Backbone.Model({ title : _l( 'Login required' ) } );\n            this.setElement( this._template() );\n        },\n        render: function() {\n            this.page.$( '#galaxy_main' ).prop( 'src', options.welcome_url );\n        },\n        _template : function() {\n            var login_url = options.root + 'user/login?' + $.param( { redirect : redirect } );\n            return '<iframe src=\"' + login_url + '\" frameborder=\"0\" style=\"width: 100%; height: 100%;\"/>';\n        }\n    });\n\n    $(function(){\n        Galaxy.page = new Page.View( _.extend( options, {\n            Right : LoginPage\n        } ) );\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./galaxy/scripts/apps/login.js"],"sourceRoot":""}